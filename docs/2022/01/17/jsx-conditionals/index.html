<!doctype html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="yandex-verification" content="635edef3908320be"><meta name="google-site-verification" content="1-m0w7Up8df1sn0230jxfTKKZ4jLeln_Em1tcyfU0qw"><meta name="color-scheme" content="dark light"><meta property="og:type" content="article"><meta property="og:title" content="Good advice on JSX conditionals"><meta property="og:url" content="https://blog.thoughtspile.tech/2022/01/17/jsx-conditionals/"><meta property="og:site_name" content="Vladimir Klepov as a Coder"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://blog.thoughtspile.techhttps://blog.thoughtspile.tech/images/jsx-conditional-cheatsheet.png?invert"><meta property="og:image" content="https://blog.thoughtspile.tech/images/bmc.png"><meta property="article:published_time" content="2022-01-17T00:00:00.000Z"><meta property="article:author" content="Vladimir Klepov"><meta property="article:tag" content="programming"><meta property="article:tag" content="frontend"><meta property="article:tag" content="react"><meta property="article:tag" content="hooks"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@thoughtspile"><meta name="twitter:image" content="https://blog.thoughtspile.techhttps://blog.thoughtspile.tech/images/jsx-conditional-cheatsheet.png?invert"><title>Good advice on JSX conditionals</title><link rel="stylesheet" href="/css/style.css?ts=1677783504322"><link rel="canonical" href="https://blog.thoughtspile.tech/2022/01/17/jsx-conditionals/"><link rel="alternate" href="/atom.xml" title="Vladimir Klepov as a Coder" type="application/atom+xml"><script defer="defer" data-domain="blog.thoughtspile.tech" src="https://t.thoughtspile.tech/js/script.js"></script></head><body class="max-width mx-auto px3"><div class="content index"><a href="/" id="header" class="header header--post"><div id="logo"></div><header id="title"><h1>Vladimir Klepov as a Coder</h1></header></a><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Good advice on JSX conditionals</h1><div class="post__date">Written in <time>2022</time></div></header><div class="content" itemprop="articleBody"><p>Conditional rendering is a cornerstone of any templating language. React / JSX bravely chose not to have a dedicated conditional syntax, like <code>ng-if=&quot;condition&quot;</code>, <a href="https://reactjs.org/docs/conditional-rendering.html" target="_blank" rel="noopener">relying</a> on JS <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_AND" target="_blank" rel="noopener">boolean operators</a> instead:</p><ul><li><code>condition &amp;&amp; &lt;JSX /&gt;</code> renders <code>&lt;JSX /&gt;</code> iff <code>condition</code> is truthy,</li><li><code>condition ? &lt;JsxTrue /&gt; : &lt;JsxFalse /&gt;</code> renders <code>&lt;JsxTrue /&gt;</code> or <code>&lt;JsxFalse /&gt;</code> depending on the truthiness of <code>condition</code>.</li></ul><p>Courageous, but not always as intuitive as you’d expect. Time after time I shoot myself in the foot with JSX conditionals. In this article, I look at the trickier corners of JSX conditionals, and share some tips for staying safe:</p><ol><li>Number <code>0</code> likes to leak into your markup.</li><li>Compound conditions with <code>||</code> can surprise you because precedence</li><li>Ternaries don’t scale.</li><li><code>props.children</code> is not something to use as a condition</li><li>How to manage update vs remount in conditionals.</li></ol><p>If you’re in a hurry, I’ve made a cheat sheet:</p><p><img src="https://blog.thoughtspile.tech/images/jsx-conditional-cheatsheet.png?invert" alt=""></p><h2>Beware of zero</h2><p>Rendering on <em>numerical</em> condition is a common use case. It’s helpful for rendering a collection only if it’s loaded and non-empty:</p><pre class="language-jsx"><code class="language-jsx"><span class="token punctuation">{</span>gallery<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Gallery</span></span> <span class="token attr-name">slides</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>gallery<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">}</span></code></pre><p>However, if the gallery <em>is</em> empty, we get an annoying <code>0</code> in out DOM instead of nothing. That’s because of the way <code>&amp;&amp;</code> works: a falsy left-hand side (like 0) is returned immediately. In JS, boolean operators do not cast their result to boolean — and for the better, since you don’t want the right-hand JSX to turn into <code>true</code>. React then proceeds to put that 0 into the DOM — unlike <code>false</code>, it’s a valid react node (again, for good — in <code>you have {count} tickets</code> rendering 0 is perfectly expected).</p><p>The fix? I have two. Cast the condition to boolean explicitly in any way you like. Now the expression value is <code>false</code>, not <code>0</code>, and <code>false</code> is not rendered:</p><pre class="language-jsx"><code class="language-jsx">gallery<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> jsx<br><span class="token comment">// or</span><br><span class="token operator">!</span><span class="token operator">!</span>gallery<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> jsx<br><span class="token comment">// or</span><br><span class="token function">Boolean</span><span class="token punctuation">(</span>gallery<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> jsx</code></pre><p>Alternatively, replace <code>&amp;&amp;</code> with a ternary to explicitly provide the falsy value — <code>null</code> works like a charm:</p><pre class="language-jsx"><code class="language-jsx"><span class="token punctuation">{</span>gallery<span class="token punctuation">.</span>length <span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Gallery</span></span> <span class="token attr-name">slides</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>gallery<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span></code></pre><h2>Mind the precedence</h2><p><em>And</em> (<code>&amp;&amp;</code>) has a higher precedence than <em>or</em> (<code>||</code>) — that’s how <a href="https://en.wikipedia.org/wiki/Boolean_algebra" target="_blank" rel="noopener">boolean algebra</a> works. However, this also means that you must be very careful with JSX conditions that contain <code>||</code>. Watch as I try to render an access error for anonymous <em>or</em> restricted users…</p><pre class="language-jsx"><code class="language-jsx">user<span class="token punctuation">.</span>anonymous <span class="token operator">||</span> user<span class="token punctuation">.</span>restricted <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>error<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre><p>… and I screw up! The code above is actually equivalent to:</p><pre class="language-jsx"><code class="language-jsx">user<span class="token punctuation">.</span>anonymous <span class="token operator">||</span> <span class="token punctuation">(</span>user<span class="token punctuation">.</span>restricted <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>error<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">)</span></code></pre><p>Which is <em>not</em> what I want. For anonymous users, you get <code>true || ...whatever...</code>, which is <code>true</code>, because JS <em>knows</em> the or-expression is true just by looking at the left-hand side and skips (<a href="https://stackoverflow.com/questions/12554578/does-javascript-have-short-circuit-evaluation" target="_blank" rel="noopener">short-circuits</a>) the rest. React doesn’t render <code>true</code>, and even if it did, <code>true</code> is not the error message you expect.</p><p>As a rule of thumb, parenthesize the condition as soon as you see the OR:</p><pre class="language-jsx"><code class="language-jsx"><span class="token punctuation">{</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>anonymous <span class="token operator">||</span> user<span class="token punctuation">.</span>restricted<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>error<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></code></pre><p>For a more sneaky case, consider this ternary-inside-the-condition:</p><pre class="language-jsx"><code class="language-jsx"><span class="token punctuation">{</span>user<span class="token punctuation">.</span>registered <span class="token operator">?</span> user<span class="token punctuation">.</span>restricted <span class="token operator">:</span> user<span class="token punctuation">.</span>rateLimited <span class="token operator">&amp;&amp;</span> <br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>error<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></code></pre><p>Parentheses still help, but avoiding ternaries in conditions is a better option — they’re very confusing, because you can’t even read the expression out in English (if the user is registered then if the user is restricted otherwise if the user is rate-limited, please make it stop).</p><h2>Don’t get stuck in ternaries</h2><p>A ternary is a fine way to switch between <em>two</em> pieces of JSX. Once you go beyond 2 items, the lack of an <code>else if ()</code> turns your logic into a bloody mess real quick:</p><pre class="language-jsx"><code class="language-jsx"><span class="token punctuation">{</span>isEmoji <span class="token operator">?</span> <br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">EmojiButton</span></span> <span class="token punctuation">/></span></span> <span class="token operator">:</span> <br>  isCoupon <span class="token operator">?</span> <br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CouponButton</span></span> <span class="token punctuation">/></span></span> <span class="token operator">:</span> <br>    isLoaded <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ShareButton</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></code></pre><p>Any extra conditions inside a ternary branch, be it a nested ternary or a simple <code>&amp;&amp;</code>, are a red flag. Sometimes, a series of <code>&amp;&amp;</code> blocks works better, at the expense of duplicating some conditions:</p><pre class="language-jsx"><code class="language-jsx"><span class="token punctuation">{</span>isEmoji <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">EmojiButton</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span><br><span class="token punctuation">{</span>isCoupon <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CouponButton</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span><br><span class="token punctuation">{</span><span class="token operator">!</span>isEmoji <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isCoupon <span class="token operator">&amp;&amp;</span> isLoaded <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ShareButton</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></code></pre><p>Other times, a good old <code>if / else</code> is the way to go. Sure, you can’t inline these in JSX, but you can always extract a function:</p><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token function-variable function">getButton</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>isEmoji<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">EmojiButton</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">;</span> <br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>isCoupon<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CouponButton</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">;</span> <br>  <span class="token keyword">return</span> isLoaded <span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ShareButton</span></span> <span class="token punctuation">/></span></span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2>Don’t conditional on JSX</h2><p>In case you’re wondering, react elements passed via props don’t work as a condition. Let me try wrapping the children in a div <em>only</em> if there are children:</p><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token function-variable function">Wrap</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <br>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>props<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <br>  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>I expect <code>Wrap</code> to render <code>null</code> when there is no content wrapped, but React doesn’t work like that:</p><ul><li><code>props.children</code> can be an empty array, e.g. <code>&lt;Wrap&gt;{[].map(e =&gt; &lt;div /&gt;)}&lt;/Wrap&gt;</code></li><li><code>children.length</code> fails, too: <code>children</code> can <em>also</em> be a single element, not an array (<code>&lt;Wrap&gt;&lt;div /&gt;&lt;/Wrap&gt;</code>).</li><li><code>React.Children.count(props.children)</code> <a href="https://reactjs.org/docs/react-api.html#reactchildrencount" target="_blank" rel="noopener">supports</a> both single and multiple children, but thinks that <code>&lt;Wrap&gt;{false &amp;&amp; 'hi'}{false &amp;&amp; 'there'}&lt;/Wrap&gt;</code> contains 2 items, while in reality there are none.</li><li>Next try: <code>React.Children.toArray(props.children)</code> <a href="https://reactjs.org/docs/react-api.html#reactchildrentoarray" target="_blank" rel="noopener">removes invalid nodes,</a> such as <code>false</code>. Sadly, you still get true for an empty fragment: <code>&lt;Wrap&gt;&lt;&gt;&lt;/&gt;&lt;Wrap&gt;</code>.</li><li>For the final nail in this coffin, if we move the conditional rendering inside a component: <code>&lt;Wrap&gt;&lt;Div hide /&gt;&lt;/Wrap&gt;</code> with <code>Div = (p) =&gt; p.hide ? null : &lt;div /&gt;</code>, we can <em>never</em> know if it’s empty during <code>Wrap</code> render, because react only renders the child <code>Div</code> after the parent, and a stateful child can re-render independently from its parent.</li></ul><p>For the only sane way to change anything if the interpolated JSX is empty, see <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:empty" target="_blank" rel="noopener">CSS <code>:empty</code> pseudo-class.</a></p><h2>Remount or update?</h2><p>JSX written in separate ternary branches feels like completely independent code. Consider the following:</p><pre class="language-jsx"><code class="language-jsx"><span class="token punctuation">{</span>hasItem <span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span></span> <span class="token attr-name">id</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span> <span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span></span> <span class="token attr-name">id</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></code></pre><p>What happens when <code>hasItem</code> changes? Don’t know about you, but my guess would be that <code>&lt;Item id={1} /&gt;</code> unmounts, then <code>&lt;Item id={2} /&gt;</code> mounts, because I wrote 2 separate JSX tags. React, however, doesn’t know or care what I wrote, all it sees is the <code>Item</code> element in the same position, so it keeps the mounted instance, updating props (see <a href="https://codesandbox.io/s/still-cherry-o123c?file=/src/App.js" target="_blank" rel="noopener">sandbox</a>). The code above is equivalent to <code>&lt;Item id={hasItem ? 1 : 2} /&gt;</code>.</p><blockquote><p>When the branches contain different components, as in <code>{hasItem ? &lt;Item1 /&gt; : &lt;Item2 /&gt;}</code>, React remounts, because <code>Item1</code> can’t be updated to become <code>Item2</code>.</p></blockquote><p>The case above just causes some unexpected behavior that’s fine as long as you properly manage updates, and even a bit more optimal than remounting. However, with uncontrolled inputs you’re in for a disaster:</p><pre class="language-jsx"><code class="language-jsx"><span class="token punctuation">{</span>mode <span class="token operator">===</span> <span class="token string">'name'</span> <br>  <span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span> <br>  <span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>phone<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></code></pre><p>Here, if you input something into <em>name</em> input, then switch the mode, your name unexpectedly leaks into the <em>phone</em> input. (again, see <a href="https://codesandbox.io/s/still-cherry-o123c?file=/src/App.js" target="_blank" rel="noopener">sandbox</a>) This can cause even more havoc with complex update mechanics relying on previous state.</p><p>One workaround here is using the <code>key</code> prop. Normally, we use it for <a href="https://reactjs.org/docs/lists-and-keys.html" target="_blank" rel="noopener">rendering lists,</a> but it’s actually an <em>element identity</em> hint for React — elements with the same <code>key</code> are the same logical element.</p><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// remounts on change</span><br><span class="token punctuation">{</span>mode <span class="token operator">===</span> <span class="token string">'name'</span> <br>  <span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span> <br>  <span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>phone<span class="token punctuation">"</span></span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>phone<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></code></pre><p>Another option is replacing the ternary with two separate <code>&amp;&amp;</code> blocks. When <code>key</code> is absent, React falls back to the index of the item in <code>children</code> array, so putting distinct elements into distinct positions works just as well as an explicit key:</p><pre class="language-jsx"><code class="language-jsx"><span class="token punctuation">{</span>mode <span class="token operator">===</span> <span class="token string">'name'</span> <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span><br><span class="token punctuation">{</span>mode <span class="token operator">!==</span> <span class="token string">'name'</span> <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>phone<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></code></pre><p>Conversely, if you have <em>very different</em> conditional props on the same logical element, you can split the branching into two separate JSX tags for readability with <em>no</em> penalty:</p><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// messy</span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <br>  <span class="token attr-name">aria-busy</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>loading<span class="token punctuation">}</span></span> <br>  <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>loading <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> submit<span class="token punctuation">}</span></span><br><span class="token punctuation">></span></span><span class="token plain-text"><br>  </span><span class="token punctuation">{</span>loading <span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Spinner</span></span> <span class="token punctuation">/></span></span> <span class="token operator">:</span> <span class="token string">'submit'</span><span class="token punctuation">}</span><span class="token plain-text"><br></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span><br><span class="token comment">// maybe try:</span><br>loading <br>  <span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">aria-busy</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Spinner</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span> <br>  <span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>submit<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">submit</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span><br><span class="token comment">// or even</span><br><span class="token punctuation">{</span>loading <span class="token operator">&amp;&amp;</span> <br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">aria-busy</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Spinner</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span><span class="token punctuation">}</span><br><span class="token punctuation">{</span><span class="token operator">!</span>loading <span class="token operator">&amp;&amp;</span> <br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>submit<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">submit</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span><span class="token punctuation">}</span><br><span class="token comment">// ^^ bonus: _move_ the element around the markup, no remount</span></code></pre><hr><p>So, here are my top tips for using JSX conditionals like a boss:</p><ul><li><code>{number &amp;&amp; &lt;JSX /&gt;}</code> renders <code>0</code> instead of nothing. Use <code>{number &gt; 0 &amp;&amp; &lt;JSX /&gt;}</code> instead.</li><li>Don’t forget the parentheses around or-conditions: <code>{(cond1 || cond2) &amp;&amp; &lt;JSX /&gt;}</code></li><li>Ternaries don’t scale beyond 2 branches — try an <code>&amp;&amp;</code> block per branch, or extract a function and use <code>if / else</code>.</li><li>You can’t tell if <code>props.children</code> (or any interpolated element) actually contains some content — CSS <code>:empty</code> is your best bet.</li><li><code>{condition ? &lt;Tag props1 /&gt; : &lt;Tag props2 /&gt;}</code> will <em>not</em> remount <code>Tag</code> — use unique <code>key</code> or separate <code>&amp;&amp;</code> branches if you want the remount.</li></ul></div><span class="share"><div><a href="https://twitter.com/share?url=https://blog.thoughtspile.tech/2022/01/17/jsx-conditionals/&text=Good advice on JSX conditionals by @thoughtspile" target="_blank" rel="noopener">Tweet</a></div><div id="share-button"><a>Share</a></div><div><a href="https://twitter.com/search?q=https://blog.thoughtspile.tech/2022/01/17/jsx-conditionals/" target="_blank" rel="noopener">Discuss on Twitter</a></div></span><div class="social-links"><a href="https://twitter.com/thoughtspile" class="link--bare" target="_blank" rel="noopener"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" class="svg-inline--fa fa-twitter fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a><a href="https://mastodon.online/@thoughtspile" class="link--bare" target="_blank" rel="noopener"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="mastodon" class="svg-inline--fa fa-mastodon fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"></path></svg></a><a href="https://www.linkedin.com/in/vklepov/" class="link--bare" target="_blank" rel="noopener"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a><a href="/atom.xml" class="link--bare" target="_blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="rss" class="svg-inline--fa fa-rss fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 64C0 46.3 14.3 32 32 32c229.8 0 416 186.2 416 416c0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96C14.3 96 0 81.7 0 64zM128 416c0 35.3-28.7 64-64 64s-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64zM32 160c159.1 0 288 128.9 288 288c0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224c-17.7 0-32-14.3-32-32s14.3-32 32-32z"></path></svg></a></div><a href="https://buymeacoffee.com/thoughtspile" class="link--bare bmc-card" target="_blank" rel="noopener"><div><b>Hello, friend!</b> My name is Vladimir, and I love writing about web development. If you got down here, you probably enjoyed this article. My goal is to become an independent content creator, and you'll help me get there by <span class="bmc">buying me a coffee!</span></div><img src="/images/bmc.png" class="bmc-image"></a><div class="post-related"><div class="post-sibling"><span class="post-siblings__direction">More?</span> <a class="tag-link-link" href="/">All articles ever</a> <a class="tag-link-link" href="/tags/programming" rel="tag">programming</a> <a class="tag-link-link" href="/tags/frontend" rel="tag">frontend</a> <a class="tag-link-link" href="/tags/react" rel="tag">react</a> <a class="tag-link-link" href="/tags/hooks" rel="tag">hooks</a></div><a class="link--bare post-sibling" href="/2021/11/30/lazy-useref/"><span class="post-siblings__direction">Older?</span> <span class="link__text">Make useRef lazy — 4 ways</span> </a><a class="link--bare post-sibling" href="/2022/01/25/what-is-react-component/"><span class="post-siblings__direction">Newer?</span> <span class="link__text">What is a react component, anyways?</span></a></div></article><script async src="/js/share.js"></script></div></body></html>