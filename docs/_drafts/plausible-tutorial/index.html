<p>With that in place, we can set up our plausible instance. I'll make it quick, since there already is a <a href="https://esc.sh/blog/plausible-analytics-selfhosting/" target="_blank" rel="noopener">tutorial by mr. Mansoor,</a> and the docs do a decent job:</p><ol><li><a href="https://docs.docker.com/engine/install/ubuntu/" target="_blank" rel="noopener">Install docker.</a></li><li>Start plausible: clone the repo, edit config, and <code>docker-compose up -d</code> the service (see <a href="https://plausible.io/docs/self-hosting" target="_blank" rel="noopener">docs</a>). If this worked, you can access the UI at <code>http://your.ip.1.1:8000</code></li><li>You can't send analytics from your HTTPS website to an HTTP endpoint, so there's more work.</li><li>Go to your DNS settings, come up with an analytics subdoiain (like <code>an.you.io</code>) and add server IP to the relevant A/AAAA record. Plausible <em>can not</em> live on a <code>/path</code>, it needs its own subdomain. Success = the UI is live on <code>http://an.you.io:8000</code></li><li>Now we need a reverse proxy for SSL termination. I went for a full-dockerized setup with <a href="https://github.com/nginx-proxy/nginx-proxy" target="_blank" rel="noopener">nginx-proxy</a> container. Set <code>VIRTUAL_HOST</code> in <code>plausible-conf</code> to enable discovery, append <code>nginx-proxy</code> to <code>docker-compose.yml</code>, restart, and you should be able to access analytics at <code>http://an.you.io</code>. Un-exposing the port 8000 at this point won't hurt either.</li><li>Now, the actual SSL certificates. подключаем волшебный контейнер с letsencrypt (авто-выписываемые SSL сертификаты) — https://github.com/nginx-proxy/acme-companion</li><li>Finally https://an.you.io/js/script.js и смотреть как трафик полился</li><li>Самая болезненная часть — выгрузить данные аналитики из гугла. Шаг можно скипнуть, но моя цель — забрать у гугла все что можно из принципа. Час плясок с Google Cloud и SSO, инструкция норм: https://plausible.io/docs/google-analytics-import</li></ol>